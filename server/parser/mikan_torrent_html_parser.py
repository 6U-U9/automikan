
import bs4 as bs
import regex as re
from datetime import datetime

from parser import Parser
from parser.name_parser import NameParser

date_format = '%Y/%m/%d %H:%M'
mikan_root = r"https://mikanani.me"

# Parse Torrent link
# Example: https://mikanani.me/Home/Episode/fe21ddd1a097153a81b57849a8b3608457093497
class MikanTorrentHtmlParser(Parser):
    def parse(content: str | bytes):
        info = {}
        soup = bs.BeautifulSoup(content, "xml")
        temp = soup.css.select(".bangumi-poster")[0]['style']
        pattern = r"url\('([^']+)'\)"
        match = re.search(pattern, temp)
        poster = ""
        if match:
            poster = match.group(1).split("?")[0]
        title = soup.css.select(".bangumi-title")[0].a.text
        mikan_bangumi_url = soup.css.select(".bangumi-title")[0].a["href"]
        mikan_bangumi_id = mikan_bangumi_url.split("/")[3].split("#")[0]
        mikan_subgroup_id = mikan_bangumi_url.split("/")[3].split("#")[1]
        mikan_subgroup_name = soup.css.select(".bangumi-info")[0].a.text
        ## Do not parse because it will get something like "昨天 10:01"
        # torrent_publish_time = datetime.strptime(soup.css.select(".bangumi-info")[1].text.split("：")[1], date_format)

        info["poster"] = mikan_root + poster
        info["title"] = title
        info["mikan_bangumi_url"] = mikan_root + mikan_bangumi_url
        info["mikan_bangumi_id"] = mikan_bangumi_id
        info["mikan_subgroup_id"] = mikan_subgroup_id
        info["mikan_subgroup_name"] = mikan_subgroup_name
        # info["torrent_publish_time"] = torrent_publish_time

        return info

if __name__ == "__main__":
    example = b'''<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">\r\n<html>\r\n<head>\r\n\r\n    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\r\n    <meta name="keywords" content="\xe6\x96\xb0\xe7\x95\xaa,\xe5\x8a\xa8\xe6\xbc\xab,\xe5\x8a\xa8\xe6\xbc\xab\xe4\xb8\x8b\xe8\xbc\x89,\xe6\x96\xb0\xe7\x95\xaa\xe4\xb8\x8b\xe8\xbd\xbd,animation,bangumi,\xe5\x8a\xa8\xe7\x94\xbb,\xe8\x9c\x9c\xe6\x9f\x91\xe8\xae\xa1\xe5\x88\x92,Mikan Project" />\r\n    <meta name="description" content="\xe8\x9c\x9c\xe6\x9f\x91\xe8\xae\xa1\xe5\x88\x92\xef\xbc\x9a\xe6\x96\xb0\xe4\xb8\x80\xe4\xbb\xa3\xe7\x9a\x84\xe5\x8a\xa8\xe6\xbc\xab\xe4\xb8\x8b\xe8\xbd\xbd\xe7\xab\x99" />\r\n\r\n    <meta name="viewport" content="width=device-width, initial-scale=1">\r\n\r\n    <!-- \xe8\x8b\xa5\xe7\x94\xa8\xe6\x88\xb7\xe6\x9c\x89Google Chrome Frame,\xe9\x82\xa3\xe4\xb9\x88ie\xe6\xb5\x8f\xe8\xa7\x88\xe6\x97\xb6\xe8\xae\xa9IE\xe4\xbd\xbf\xe7\x94\xa8chrome\xe5\x86\x85\xe6\xa0\xb8 -->\r\n    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />\r\n\r\n    <!-- \xe8\x8b\xa5\xe6\x98\xaf\xe5\x8f\x8c\xe6\xa0\xb8\xe6\xb5\x8f\xe8\xa7\x88\xe5\x99\xa8,\xe9\xbb\x98\xe8\xae\xa4webkit\xe6\xb8\xb2\xe6\x9f\x93(chrome) -->\r\n    <meta name="renderer" content="webkit">\r\n    <title>[&#x55B5;&#x840C;&#x5976;&#x8336;&#x5C4B;&amp;LoliHouse] &#x4E71;&#x9A6C; 1/2 2024&#x5E74;&#x7248; / Ranma &#xBD; / Ranma 1/2 (2024) - 11 [WebRip 1080p HEVC-10bit AAC][&#x7B80;&#x7E41;&#x65E5;&#x5185;&#x5C01;&#x5B57;&#x5E55;] - Mikan Project</title>\r\n\r\n    <!-- here put import css lib -->\r\n    \r\n    \r\n        <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.min.css?v=iA3nZlsaqoQDAzE97KM1KvJX1VrtRYTV4X8Pv_4P3gE" />\r\n        <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=tNayIImSiiuYn29ZbBDCb_qntx-yCkEl_eZKsdO0PNU" />\r\n        <link rel="stylesheet" href="/css/thirdparty.min.css?v=c2SZy6n-55iljz60XCAALXejEZvjc43kgwamU5DAYUU" />\r\n        <link rel="stylesheet" href="/css/animate.min.css?v=NCtndtBC751I3lMLIQotLVV0h-TyLyfSjwaaJSDJ3ug" />\r\n        <link rel="stylesheet" href="/css/mikan.min.css?v=aupBMgBgKRB5chTb5fl8lvHpN3OqX67_gKg3lXZewRw" />\r\n\r\n        <script src="/lib/jquery/dist/jquery.min.js?v=tAnBShC0yq1rVIRKpjpfr3SLg-7MLdDU-x2RP43lU2U"></script>\r\n        <script src="/lib/bootstrap/dist/js/bootstrap.min.js?v=WkpTWREKdzvRVNqUxI_9amIzop39WpMUVV9a5sPkdFk"></script>\r\n        <script src="/js/thirdparty.min.js?v=NsK_w5fw7Nm4ZPm4eZDgsivasZNgT6ArhIjmj-bRnR0"></script>\r\n        <script src="/js/darkreader.min.js?v=t-q_d3TSOu2OcjhgllRnF9Z7J6xiIQXRCURkxQuznho"></script>\r\n        <script src="/js/ScrollMagic.min.js?v=eaccbuZ5HUW1MGDUyoRjisLI4fSR3R3UbSJFjSVKdF0"></script>\r\n        <script src="/js/jquery.ScrollMagic.min.js?v=064ICp5drQaPbNH3Voso8qJsWTq5VFZgx5dePWpANUg"></script>\r\n    \r\n\r\n    <link rel="icon" href="/images/favicon.ico?v=2" />\r\n    <link rel="apple-touch-icon" href="\\Images\\apple-touch-icon.png">\r\n    <link rel="apple-touch-icon" sizes="152x152" href="\\Images\\apple-touch-icon-152x152.png">\r\n    <link rel="apple-touch-icon" sizes="180x180" href="\\Images\\apple-touch-icon-180x180.png">\r\n    <link rel="apple-touch-icon" sizes="144x144" href="\\Images\\apple-touch-icon-144x144.png">\r\n\r\n    <script>\r\n        (function (i, s, o, g, r, a, m) {\r\n            i[\'GoogleAnalyticsObject\'] = r; i[r] = i[r] || function () {\r\n                (i[r].q = i[r].q || []).push(arguments)\r\n            }, i[r].l = 1 * new Date(); a = s.createElement(o),\r\n                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)\r\n        })(window, document, \'script\', \'//www.google-analytics.com/analytics.js\', \'ga\');\r\n\r\n        ga(\'create\', \'UA-8911610-8\', \'auto\');\r\n        ga(\'send\', \'pageview\');\r\n    </script>\r\n</head>\r\n<body class="main">\r\n    <div id="sk-header" class="hidden-xs hidden-sm">\r\n        <div id="sk-top-nav" class="container">\r\n            <a id="logo" href="/" style="width:205px;"><img id="mikan-pic" src="/images/mikan-pic.png" /><img src="/images/mikan-text.svg" style="height:30px;" /></a>\r\n            <div id="nav-list">\r\n                <ul class="list-inline nav-ul">\r\n                    <li class="">\r\n                        <div class="sk-col"><a href="/"><i class="fa fa-home fa-lg"></i>\xe4\xb8\xbb\xe9\xa1\xb5</a></div>\r\n                    </li>\r\n                    <li class="">\r\n                        <div class="sk-col"><a href="/Home/MyBangumi"><i class="fa fa-rss fa-lg"></i>\xe8\xae\xa2\xe9\x98\x85</a></div>\r\n                    </li>\r\n                    <li class="">\r\n                        <div class="sk-col"><a href="/Home/Classic"><i class="fa fa-slack fa-lg"></i>\xe5\x88\x97\xe8\xa1\xa8</a></div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class="search-form">\r\n                <form method="get" action="/Home/Search">\r\n                    <div class="form-group has-feedback">\r\n                        <label for="search" class="sr-only">\xe6\x90\x9c\xe7\xb4\xa2</label>\r\n                        <input type="text" class="form-control input-sm" name="searchstr" id="header-search" placeholder="\xe6\x90\x9c\xe7\xb4\xa2">\r\n                        <span class="glyphicon glyphicon-search form-control-feedback"></span>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n            \r\n\r\n<section id="login">\r\n        <div id="user-login" class="pull-right">\r\n            <a href="/Account/Register" class="text-right">\xe6\xb3\xa8\xe5\x86\x8c</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            <a onclick="ToggleActive(this)" class="text-right" data-toggle="popover-x" data-target="#login-popover" data-placement="bottom bottom-right" rel="popover">\xe7\x99\xbb\xe5\xbd\x95</a>\r\n<form action="/Account/Login?ReturnUrl=%2FHome%2FEpisode%2Ffe21ddd1a097153a81b57849a8b3608457093497" class="form-vertical" method="post">                <div id="login-popover" class="popover popover-default">\r\n                    <div class="arrow"></div>\r\n                    <div id="login-popover-conent">\r\n                        <div id="login-popover-input">\r\n                            <div id="login-popover-div-username">\r\n                                <img src="/images/user-name_login_icon.png" />\r\n                                <input type="text" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d" id="login-popover-input-username" name="UserName" />\r\n                            </div>\r\n                            <div id="login-popover-div-password">\r\n                                <img src="/images/password_login_icon.png" style="margin-left:3px;" />\r\n                                <input type="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" id="login-popover-input-password" name="Password" />\r\n                            </div>\r\n                        </div>\r\n                        <button id="login-popover-submit" type="submit" class="btn">\xe7\x99\xbb&nbsp;&nbsp;&nbsp;\xe5\xbd\x95</button>\r\n                        <div class="checkbox" id="login-popover-password">\r\n                            <label id="login-popover-remember-password"><input type="checkbox" value="true" name="RememberMe"><input type="hidden" value="false" name="RememberMe">\xe8\xae\xb0\xe4\xbd\x8f\xe5\xaf\x86\xe7\xa0\x81</label>\r\n                            <div id="login-popover-forget-password" class="pull-right"><a href="/Account/ForgotPassword" class="forget-password">\xe5\xbf\x98\xe8\xae\xb0\xe5\xaf\x86\xe7\xa0\x81</a></div>\r\n                        </div>\r\n\r\n                        <a id="login-popover-create-account">\xe8\xbf\x98\xe6\xb2\xa1\xe6\x9c\x89\xe8\xb4\xa6\xe5\x8f\xb7\xef\xbc\x9f\xe8\xb5\xb6\xe7\xb4\xa7\xe6\x9d\xa5\xe6\xb3\xa8\xe5\x86\x8c\xe4\xb8\x80\xe4\xb8\xaa\xe5\x90\xa7~</a>\r\n                    </div>\r\n                </div>\r\n<input name="__RequestVerificationToken" type="hidden" value="CfDJ8I2fezsYX9pEhooVpAPBEWq-C734IshkTW6-uU3mK41WvGbj7g4RwhLoXzccp13rWFeSZuBMAByqGqle9R5c4dcJc4DwUMcOb8s6DyJcki48iXTDmHrwnFHkIUSt2a6-eDOFlVTHbnjgx8C0scVq9AU" /></form>        </div>\r\n        <script>\r\n            var AdvancedSubscriptionEnabled = false;\r\n        </script>\r\n</section>\r\n        </div>\r\n        <div class="ribbon">\r\n            <span class="ribbon-color1"></span>\r\n            <span class="ribbon-color2"></span>\r\n            <span class="ribbon-color3"></span>\r\n            <span class="ribbon-color4"></span>\r\n            <span class="ribbon-color5"></span>\r\n            <span class="ribbon-color6"></span>\r\n            <span class="ribbon-color7"></span>\r\n        </div>\r\n    </div>\r\n    <div class="m-home-nav hidden-lg hidden-md" id="sk-mobile-header">\r\n        <div class="m-home-tool-left clickable" data-toggle="modal" data-target="#modal-nav">\r\n            <i class="fa fa-bars" aria-hidden="true"></i>\r\n        </div>\r\n        <div class="m-home-tool-left"></div>\r\n        <div style="text-align: center; height:100%;flex:1;">\r\n            <a href="/" style="text-decoration:none">\r\n                <img src="/images/mikan-pic.png" style="height: 3rem;margin-top: 0.5rem;">\r\n                <img src="/images/mikan-text.png" style="height: 1.5rem;margin-top: 0.5rem;">\r\n            </a>\r\n        </div>\r\n        <div class="m-home-tool-right clickable" data-toggle="modal" data-target="#modal-login">\r\n            <i class="fa fa-user" aria-hidden="true" style="margin-right: 1rem;"></i>\r\n        </div>\r\n        <div class="m-home-tool-right clickable" onclick="ShowNavSearch()">\r\n            <i class="fa fa-search" aria-hidden="true"></i>\r\n        </div>\r\n    </div>\r\n    <div class="m-nav-search" style="width: 100%;">\r\n        <div style="flex: 1;">\r\n            <form method="get" action="/Home/Search">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon" id="sizing-addon1" style="border: none;background-color: white;">\r\n                        <i class="fa fa-search" aria-hidden="true"></i>\r\n                    </span>\r\n                    <input type="text" class="form-control" placeholder="\xe6\x90\x9c\xe7\xb4\xa2" name="searchstr" aria-describedby="sizing-addon1" style="border: none;font-size:16px;">\r\n                </div>\r\n            </form>\r\n        </div>\r\n        <div style="width: 4rem;" onclick="HideNavSearch()">\r\n            <span style="font-size: 1.25rem;">\xe5\x8f\x96\xe6\xb6\x88</span>\r\n        </div>\r\n    </div>\r\n    \r\n\r\n<meta name="robots" content="noindex">\r\n\r\n<div id="sk-container" class="container">\r\n    <div class="pull-left leftbar-container">\r\n        <img src="/images/subscribed-badge.svg" class="subscribed-badge" style="display:none;" />\r\n\r\n            <div class="bangumi-poster div-hover" style="background-image: url(\'/images/Bangumi/202410/07a623d9.jpg?width=400&height=560&format=webp\');" onclick="window.open(\'/Home/Bangumi/3466#370\', \'_blank\');"></div>\r\n            <p class="bangumi-title"><a target="_blank" class="w-other-c" style="color:#555" href="/Home/Bangumi/3466#370">&#x4E71;&#x9A6C;&#xBD;</a> <a href="/RSS/Bangumi?bangumiId=3466&subgroupid=370" class="mikan-rss" data-placement="bottom" data-toggle="tooltip" data-original-title="RSS" target="_blank"><i class="fa fa-rss-square"></i></a></p>\r\n\r\n                <p class="bangumi-info">\r\n                    \xe5\xad\x97\xe5\xb9\x95\xe7\xbb\x84\xef\xbc\x9a<a class="magnet-link-wrap" href="/Home/PublishGroup/223" target="_blank">LoliHouse</a>\r\n                </p>\r\n\r\n            <p class="bangumi-info">\xe5\x8f\x91\xe5\xb8\x83\xe6\x97\xa5\xe6\x9c\x9f\xef\xbc\x9a2024/12/16 22:28</p>\r\n\r\n        <p class="bangumi-info">\xe6\x96\x87\xe4\xbb\xb6\xe5\xa4\xa7\xe5\xb0\x8f\xef\xbc\x9a552.79 MB</p>\r\n\r\n        <div id="leftbar-nav-anchor"></div>\r\n        <div class="leftbar-nav">\r\n            <a class="btn episode-btn" href="/Download/20241216/fe21ddd1a097153a81b57849a8b3608457093497.torrent">\xe4\xb8\x8b\xe8\xbd\xbd\xe7\xa7\x8d\xe5\xad\x90</a>\r\n            <a class="btn episode-btn" href="magnet:?xt=urn:btih:fe21ddd1a097153a81b57849a8b3608457093497&amp;tr=http%3a%2f%2ft.nyaatracker.com%2fannounce&amp;tr=http%3a%2f%2ftracker.kamigami.org%3a2710%2fannounce&amp;tr=http%3a%2f%2fshare.camoe.cn%3a8080%2fannounce&amp;tr=http%3a%2f%2fopentracker.acgnx.se%2fannounce&amp;tr=http%3a%2f%2fanidex.moe%3a6969%2fannounce&amp;tr=http%3a%2f%2ft.acg.rip%3a6699%2fannounce&amp;tr=https%3a%2f%2ftr.bangumi.moe%3a9696%2fannounce&amp;tr=udp%3a%2f%2ftr.bangumi.moe%3a6969%2fannounce&amp;tr=http%3a%2f%2fopen.acgtracker.com%3a1096%2fannounce&amp;tr=udp%3a%2f%2ftracker.opentrackr.org%3a1337%2fannounce">\xe7\xa3\x81\xe5\x8a\x9b\xe9\x93\xbe\xe6\x8e\xa5</a>\r\n            <a class="btn episode-btn" href="https://mypikpak.com/drive/url-checker?url=magnet:?xt.1=urn:btih:fe21ddd1a097153a81b57849a8b3608457093497">\xe5\x9c\xa8\xe7\xba\xbf\xe6\x92\xad\xe6\x94\xbe</a>\r\n                    <button class="btn episode-btn js-subscribe_bangumi_page" data-bangumiid="3466" data-subtitlegroupid="370">\xe8\xae\xa2\xe9\x98\x85\xe7\x95\xaa\xe7\xbb\x84</button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="central-container" style="min-height: 532px;">\r\n        <div class="episode-header" style="">\r\n            <p class="episode-title">[&#x55B5;&#x840C;&#x5976;&#x8336;&#x5C4B;&amp;LoliHouse] &#x4E71;&#x9A6C; 1/2 2024&#x5E74;&#x7248; / Ranma &#xBD; / Ranma 1/2 (2024) - 11 [WebRip 1080p HEVC-10bit AAC][&#x7B80;&#x7E41;&#x65E5;&#x5185;&#x5C01;&#x5B57;&#x5E55;] [552.79 MB]</p>\r\n        </div>\r\n        <br />\r\n        <div style="padding-bottom:20px" class="episode-desc">\r\n            <div style="margin-top: -10px; margin-bottom: 10px;">\r\n                    \r\n\r\n<div style="width:100%; margin-right: auto; margin-left: auto;" class="hidden-xs hidden-sm">\r\n    <a href="https://shop119340084.taobao.com/?mm_sycmid=1_150417_dba461f2e2f73a9ea2a8fa11f33a1aee" onclick="ga(\'send\', \'event\', \'sswj_lg\', \'clicked\', \'ad\');">\r\n    <img src="/images/SSWJ/sswj8_lg.jpg" style=\'height: 100%; width: 100%; object-fit: contain\' />\r\n    </a>\r\n</div>\r\n\r\n<div style="width:100%; margin-right: auto; margin-left: auto;" class="hidden-lg hidden-md">\r\n    <a href="https://m.tb.cn/h.g0X5kru9wgYTRsp?mm_sycmid=1_150416_5914d148315f48d5297c751b84bac595" onclick="ga(\'send\', \'event\', \'sswj_sm\', \'clicked\', \'ad\');">\r\n        <img src="/images/SSWJ/sswj8_sm.jpg" style=\'height: 100%; width: 100%; object-fit: contain\' />\r\n    </a>\r\n</div>\r\n            </div>\r\n\r\n<p><strong><img alt src="https://s2.loli.net/2024/10/06/o9hyTreIkOFMxSL.webp" /></strong></p>\n<p><strong>\xe4\xb9\xb1\xe9\xa9\xac 1/2 2024\xe5\xb9\xb4\xe7\x89\x88 / \xe3\x82\x89\xe3\x82\x93\xe3\x81\xbe1/2 / Ranma \xc2\xbd / Ranma 1/2 (2024)</strong></p>\n<p>&nbsp;</p>\n<p><strong>\xe5\xad\x97\xe5\xb9\x95\xef\xbc\x9a\xe5\x96\xb5\xe8\x90\x8c\xe5\xa5\xb6\xe8\x8c\xb6\xe5\xb1\x8b</strong></p>\n<p><strong>\xe8\x84\x9a\xe6\x9c\xac\xef\xbc\x9afloatsuki</strong></p>\n<p><strong>\xe5\x8e\x8b\xe5\x88\xb6\xef\xbc\x9aTherefore9</strong></p>\n<p><strong>\xe6\x9c\xac\xe7\x89\x87\xe4\xb8\x8e\xe5\x96\xb5\xe8\x90\x8c\xe5\xa5\xb6\xe8\x8c\xb6\xe5\xb1\x8b\xe5\x90\x88\xe4\xbd\x9c\xef\xbc\x8c\xe6\x84\x9f\xe8\xb0\xa2\xe5\xad\x97\xe5\xb9\x95\xe7\xbb\x84\xe7\x9a\x84\xe8\xbe\x9b\xe5\x8b\xa4\xe5\x8a\xb3\xe5\x8a\xa8\xe3\x80\x82</strong></p>\n<p>&nbsp;</p>\n<hr />\n<p>&nbsp;</p>\n<p><strong>\xe6\x9c\xac\xe7\xbb\x84\xe4\xbd\x9c\xe5\x93\x81\xe9\xa6\x96\xe5\x8f\x91\xe4\xba\x8e\xef\xbc\x9a<a href="https://acg.rip/?term=LoliHouse">acg.rip</a> | <a href="https://share.dmhy.org/topics/list?keyword=lolihouse">dmhy.org</a> | <a href="https://bangumi.moe/search/581be821ee98e9ca20730eae">bangumi.moe</a> | <a href="https://nyaa.si/?f=0&amp;c=0_0&amp;q=lolihouse">nyaa.si</a></strong></p>\n<p><strong>\xe5\x90\x84\xe7\xab\x99\xe5\x8f\x91\xe5\xb8\x83\xe6\x83\x85\xe5\x86\xb5\xe5\x8f\x96\xe5\x86\xb3\xe4\xba\x8e\xe7\xab\x99\xe7\x82\xb9\xe5\x8f\xaf\xe7\x94\xa8\xe6\x80\xa7\xef\xbc\x8c\xe5\xa6\x82\xe6\x9c\x89\xe7\xbc\xba\xe5\xa4\xb1\xe7\x83\xa6\xe8\xaf\xb7\xe7\xa7\xbb\xe6\xad\xa5\xe5\x85\xb6\xe4\xbb\x96\xe7\xab\x99\xe7\x82\xb9\xe4\xb8\x8b\xe8\xbd\xbd\xe3\x80\x82</strong></p>\n<p>&nbsp;</p>\n<hr />\n<p>&nbsp;</p>\n<p><strong>\xe4\xb8\xba\xe4\xba\x86\xe9\xa1\xba\xe5\x88\xa9\xe5\x9c\xb0\xe8\xa7\x82\xe7\x9c\x8b\xe6\x88\x91\xe4\xbb\xac\xe7\x9a\x84\xe4\xbd\x9c\xe5\x93\x81\xef\xbc\x8c\xe6\x8e\xa8\xe8\x8d\x90\xe5\xa4\xa7\xe5\xae\xb6\xe4\xbd\xbf\xe7\x94\xa8\xe4\xbb\xa5\xe4\xb8\x8b\xe6\x92\xad\xe6\x94\xbe\xe5\x99\xa8\xef\xbc\x9a</strong></p>\n<p><strong>Windows\xef\xbc\x9a<a href="https://mpv.io/">mpv</a>\xef\xbc\x88<a href="https://vcb-s.com/archives/7594">\xe6\x95\x99\xe7\xa8\x8b</a>\xef\xbc\x89</strong></p>\n<p><strong>macOS\xef\xbc\x9a<a href="https://iina.io/">IINA</a></strong></p>\n<p><strong>iOS/Android\xef\xbc\x9a<a href="https://www.videolan.org/vlc/">VLC media player</a></strong></p>\n<p>&nbsp;</p>\n<hr />\n<p>&nbsp;</p>\n<p><strong><a href="https://share.dmhy.org/topics/view/599634_LoliHouse_LoliHouse_5th_Anniversary_Announcement.html">\xe7\x82\xb9\xe5\x87\xbb\xe6\x9f\xa5\xe7\x9c\x8b LoliHouse \xe4\xba\x94\xe5\x91\xa8\xe5\xb9\xb4\xe7\xba\xaa\xe5\xbf\xb5\xe5\x85\xac\xe5\x91\x8a\xef\xbc\x88\xe9\x99\x84\xe5\xbe\x80\xe5\xb9\xb4\xe5\x85\xa8\xe9\x83\xa8\xe7\xa4\xbc\xe5\x8c\x85\xef\xbc\x89</a></strong></p>\n<p><strong><a href="https://github.com/AmusementClub/OKP">\xe7\x82\xb9\xe5\x87\xbb\xe6\x9f\xa5\xe7\x9c\x8b One-Key-Publish \xe4\xb8\x80\xe9\x94\xae\xe5\x8f\x91\xe5\xb8\x83\xe5\xb7\xa5\xe5\x85\xb7\xe5\x8c\x85</a></strong></p>\n<p>&nbsp;</p>\n<hr />\n<p><strong>\xe4\xba\xba\xe4\xba\xba\xe4\xb8\xba\xe6\x88\x91\xef\xbc\x8c\xe6\x88\x91\xe4\xb8\xba\xe4\xba\xba\xe4\xba\xba\xef\xbc\x8c\xe4\xb8\xba\xe4\xba\x86\xe5\x90\x84\xe4\xbd\x8d\xe8\xa7\x82\xe4\xbc\x97\xe8\x83\xbd\xe5\xbf\xab\xe9\x80\x9f\xe4\xb8\x8b\xe8\xbd\xbd\xef\xbc\x8c\xe8\xaf\xb7\xe4\xbd\xbf\xe7\x94\xa8 uTorrent / qBittorrent\xe7\xad\x89\xe6\xad\xa3\xe8\xa7\x84 BT \xe8\xbd\xaf\xe4\xbb\xb6\xe4\xb8\x8b\xe8\xbd\xbd\xef\xbc\x8c\xe5\xb9\xb6\xe4\xbf\x9d\xe6\x8c\x81\xe5\xbc\x80\xe6\x9c\xba\xe4\xb8\x8a\xe4\xbc\xa0\xef\xbc\x8c\xe8\xb0\xa2\xe8\xb0\xa2~</strong></p>        </div>\r\n    </div>\r\n\r\n    <a href="#0" class="cd-top cd-top-btn">Top</a>\r\n</div>\r\n\r\n\r\n\r\n<style>\r\n    img {\r\n        max-width: 937px;\r\n    }\r\n\r\n    .episode-title {\r\n        color: #555;\r\n        font-size: 12px;\r\n        font-weight: bold;\r\n        margin-bottom: 8px;\r\n        margin-top: 10px;\r\n    }\r\n\r\n    .episode-header {\r\n        max-height: 45px;\r\n        border-bottom: 2px solid #e8e8e8;\r\n    }\r\n\r\n    .episode-btn {\r\n        background-color: #c8d2d7;\r\n        border-radius: 3px;\r\n        color: #fff;\r\n        font-weight: bold;\r\n        height: 35px;\r\n        margin-top: 10px;\r\n        width: 100%;\r\n    }\r\n\r\n        .episode-btn:hover {\r\n            background-color: #61ccd1;\r\n            color: #fff;\r\n        }\r\n\r\n    .div-hover {\r\n        cursor: pointer;\r\n    }\r\n</style>\r\n    <div class="modal modal-fullscreen fade" id="modal-nav" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="background-color:#3bc0c3;">\r\n        <div class="modal-dialog">\r\n            <div class="modal-content">\r\n                <div class="modal-body" style="margin: auto;width:100%;">\r\n                    <div class="m-tool">\r\n                        <span class="m-close clickable"><i class="fa fa-times" aria-hidden="true" data-toggle="modal" data-target="#modal-nav"></i></span>\r\n                        <div class="m-tool-toolbar">\r\n                            <img src="/images/mikan-pic.png" style="width: 3rem;">\r\n                            <img src="/images/mikan-text.png" style="width: 7rem;">\r\n                        </div>\r\n                        <div class="m-tool-list">\r\n                            <ul>\r\n                                <li><a href="/" class="link">\xe4\xb8\xbb\xe9\xa1\xb5</a></li>\r\n                                <li class="m-tool-search-change"><a href="/Home/MyBangumi" class="link">\xe8\xae\xa2\xe9\x98\x85</a></li>\r\n                                <li onclick="tool.clickSearch()" class="m-tool-search-change">\r\n                                    <i class="fa fa-search" aria-hidden="true"></i>&nbsp;&nbsp;\xe6\x90\x9c\xe7\xb4\xa2\xe7\xab\x99\xe5\x86\x85\r\n                                </li>\r\n                                <li class="m-tool-search-input">\r\n                                    <form method="get" action="/Home/Search">\r\n                                        <div style="display: flex;height: 100%;">\r\n                                            <input type="text" class="form-control" name="searchstr" style="font-size:16px;" />\r\n                                            <span style="width: 5rem;" onclick="tool.resetSearch()">\xe5\x8f\x96\xe6\xb6\x88</span>\r\n                                        </div>\r\n                                    </form>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="modal modal-fullscreen fade" id="modal-login" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="background-color:#edf1f2;">\r\n        <div class="modal-dialog">\r\n            <div class="modal-content">\r\n                <div class="modal-body" style="margin: auto;width:100%;height:85vh;">\r\n                    <div class="m-login">\r\n                        <span class="m-left clickable"><i class="fa fa-angle-left" aria-hidden="true" data-toggle="modal" data-target="#modal-login"></i></span>\r\n\r\n                            <div class="m-tool-title">\r\n                                \xe7\x99\xbb\xe9\x99\x86mikan\xe8\xb4\xa6\xe5\x8f\xb7\r\n                            </div>\r\n                            <div style="text-align: center;margin-top: 2rem;">\r\n                                <img src="/images/mikan-pic.png" style="width: 6rem;">\r\n                            </div>\r\n<form action="/Account/Login?ReturnUrl=%2FHome%2FEpisode%2Ffe21ddd1a097153a81b57849a8b3608457093497" method="post">                                <div>\r\n                                    <input type="text" class="form-control" aria-label="..." placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d" name="UserName">\r\n                                    <input type="password" class="form-control" aria-label="..." placeholder="\xe5\xaf\x86\xe7\xa0\x81" name="Password">\r\n                                </div>\r\n                                <button class="form-control" type="submit">\xe7\x99\xbb\xe5\xbd\x95</button>\r\n<input name="__RequestVerificationToken" type="hidden" value="CfDJ8I2fezsYX9pEhooVpAPBEWq-C734IshkTW6-uU3mK41WvGbj7g4RwhLoXzccp13rWFeSZuBMAByqGqle9R5c4dcJc4DwUMcOb8s6DyJcki48iXTDmHrwnFHkIUSt2a6-eDOFlVTHbnjgx8C0scVq9AU" /></form>                            <div class="m-goto-registry">\r\n                                <a href="/Account/Register" class="w-other-c" style="color:#3bc0c3">\xe7\xab\x8b\xe5\x8d\xb3\xe6\xb3\xa8\xe5\x86\x8c</a>\r\n                            </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <footer class="footer hidden-xs hidden-sm">\r\n        <div id="sk-footer" class="container text-center">\r\n            <div>Powered by Mikan Project <a href="/Home/Contact" target="_blank">\xe8\x81\x94\xe7\xb3\xbb\xe6\x88\x91\xe4\xbb\xac</a></div>\r\n            <div>Cooperate by PlaymateCat@Lisa</div>\r\n        </div>\r\n    </footer>\r\n\r\n    <script>\r\n        var tool = {};\r\n        (function () {\r\n\r\n            var inputPEl = $(\'.m-tool-search-input\');\r\n            var inputEl = inputPEl.find(\'input\');\r\n            var changeEl = $(\'.m-tool-search-change\');\r\n            inputPEl.hide();\r\n            tool.clickSearch = clickSearch;\r\n            tool.resetSearch = resetSearch;\r\n\r\n            function clickSearch() {\r\n                changeEl.hide();\r\n                inputPEl.show();\r\n                inputEl.focus();\r\n            }\r\n\r\n            function resetSearch() {\r\n                changeEl.show();\r\n                inputPEl.hide();\r\n                inputEl.val(\'\');\r\n            }\r\n        })();\r\n    </script>\r\n\r\n    <script>\r\n        var pageUtil;\r\n\r\n        (function () {\r\n            pageUtil = {\r\n                isMobile: isMobile\r\n            };\r\n\r\n            function isMobile() {\r\n                var check = false;\r\n                (function (a) {\r\n                    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\r\n                })(navigator.userAgent || navigator.vendor || window.opera);\r\n                return check;\r\n            }\r\n        })();\r\n\r\n        //detect if page is mobile\r\n        if (pageUtil.isMobile()) {\r\n            document.getElementsByTagName(\'html\')[0].style[\'font-size\'] = window.innerWidth / 32 + \'px\';\r\n        }\r\n    </script>\r\n</body>\r\n\r\n<!-- here put your own javascript -->\r\n\r\n\r\n    <script src="/js/mikan.min.js?v=7USd_hfRE7KH46vQBdF29boa3ENWKMVFRTyD9a8XEDg"></script>\r\n\r\n\r\n\r\n</html>'''
    print(MikanTorrentHtmlParser.parse(example))